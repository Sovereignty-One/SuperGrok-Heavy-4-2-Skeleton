<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Q-Resist ‚Äì Offline Hashing & Key Derivation</title>
  <style>
    :root {
      --bg: #0f172a;
      --card: #1e293b;
      --text: #e2e8f0;
      --accent: #60a5fa;
      --success: #34d399;
      --warn: #fbbf24;
    }
    body {
      font-family: system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      margin: 0;
      padding: 1.5rem;
      line-height: 1.6;
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
      background: var(--card);
      border-radius: 12px;
      padding: 2rem;
      box-shadow: 0 10px 30px rgba(0,0,0,0.4);
    }
    h1 { font-size: 2.1rem; margin-bottom: 0.8rem; color: #93c5fd; }
    .subtitle { color: #94a3b8; margin-bottom: 2rem; }
    textarea, input, select {
      width: 100%;
      padding: 0.9rem;
      margin: 0.4rem 0 1rem;
      background: #0f172a;
      border: 1px solid #334155;
      border-radius: 8px;
      color: var(--text);
      font-family: ui-monospace, monospace;
      font-size: 0.95rem;
    }
    button {
      padding: 0.9rem 1.6rem;
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: 0.15s;
    }
    button:hover { background: #3b82f6; }
    .output {
      background: #020617;
      padding: 1.2rem;
      border-radius: 8px;
      font-family: ui-monospace, monospace;
      white-space: pre-wrap;
      word-break: break-all;
      margin: 1.2rem 0;
      min-height: 5rem;
    }
    .param-block { margin: 1.5rem 0; padding: 1rem; background: #0f172a; border-radius: 8px; }
    .hidden { display: none; }
    .note { font-size: 0.9rem; color: #94a3b8; margin: 0.8rem 0; }
    .warning { color: var(--warn); font-size: 0.9rem; margin-top: 0.4rem; }
    .tabs {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1.5rem;
      border-bottom: 1px solid #334155;
    }
    .tab {
      padding: 0.7rem 1.4rem;
      background: transparent;
      border: none;
      color: #94a3b8;
      cursor: pointer;
      border-bottom: 3px solid transparent;
    }
    .tab.active {
      color: var(--accent);
      border-bottom-color: var(--accent);
      font-weight: 600;
    }
  </style>
</head>
<body>

<div class="container">
  <h1>Q-Resist ‚Äì Offline Crypto Tools</h1>
  <p class="subtitle">Hashing & key derivation ‚Äî everything runs in your browser, no server involved</p>

  <div class="tabs">
    <button class="tab active" data-tab="hash">Hash / Derive</button>
    <button class="tab" data-tab="info">About the algorithms</button>
  </div>

  <!-- Main tool tab -->
  <div id="tab-hash">
    <div class="input-group">
      <label for="input">Text or password:</label>
      <textarea id="input" rows="5" placeholder="Enter text to hash or password to derive a key‚Ä¶"></textarea>
      <div id="sizeWarning" class="warning hidden">Input is large (>1 MB) ‚Äî processing may take several seconds.</div>
    </div>

    <div class="input-group">
      <label for="algo">Tool:</label>
      <select id="algo">
        <option value="blake3">BLAKE3 ‚Äî fast general-purpose hash</option>
        <option value="sha3">SHA3-512 ‚Äî NIST-standardized Keccak</option>
        <option value="argon2">Argon2id ‚Äî memory-hard password/key derivation</option>
      </select>
    </div>

    <!-- Argon2 parameters -->
    <div id="argonParams" class="param-block hidden">
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 1rem;">
        <div>
          <label for="argonType">Variant</label>
          <select id="argonType">
            <option value="id">Argon2id (recommended)</option>
            <option value="i">Argon2i</option>
          </select>
        </div>
        <div>
          <label for="timeCost">Time cost</label>
          <input type="number" id="timeCost" min="1" value="3">
        </div>
        <div>
          <label for="memCost">Memory (KiB)</label>
          <input type="number" id="memCost" min="8" value="65536">
        </div>
        <div>
          <label for="parallelism">Parallelism</label>
          <input type="number" id="parallelism" min="1" value="4">
        </div>
        <div>
          <label for="hashLen">Output length (bytes)</label>
          <input type="number" id="hashLen" min="4" max="1024" value="32">
        </div>
      </div>

      <div style="margin-top: 1rem;">
        <label for="salt">Salt (hex) ‚Äî optional</label>
        <div style="display: flex; gap: 0.8rem;">
          <input type="text" id="salt" placeholder="Leave blank for random salt">
          <button id="genSalt">Generate random salt</button>
        </div>
        <div class="note">Salt is shown in hex. Save it if you want to reproduce the same key later.</div>
      </div>
    </div>

    <!-- BLAKE3 parameters -->
    <div id="blake3Params" class="param-block hidden">
      <label for="blake3Len">Output length (bytes)</label>
      <input type="number" id="blake3Len" min="1" max="1024" value="32">
      <div class="note">BLAKE3 can produce any output size. Default 32 bytes (256 bits) is cryptographically secure.</div>
    </div>

    <button id="runBtn">Run</button>

    <div class="output-label" style="margin: 1.5rem 0 0.5rem;">Result</div>
    <div id="output" class="output">Waiting for input‚Ä¶</div>

    <div style="margin-top: 1.2rem; display: flex; gap: 1rem;">
      <button id="copyBtn">Copy result</button>
      <button id="downloadBtn">Download as .txt</button>
    </div>
  </div>

  <!-- Info tab -->
  <div id="tab-info" class="hidden">
    <h2 style="margin-bottom: 1rem;">What each tool actually does</h2>

    <div style="margin-bottom: 1.5rem;">
      <h3>BLAKE3</h3>
      <p>Very fast cryptographic hash (faster than SHA-3 and SHA-2 on modern hardware).</p>
      <p>Output size can be any length (default 32 bytes = 256 bits).</p>
      <p>Strong against length-extension and collision attacks. Good general-purpose choice.</p>
    </div>

    <div style="margin-bottom: 1.5rem;">
      <h3>SHA3-512 (Keccak)</h3>
      <p>NIST-standardized hash function (FIPS 202).</p>
      <p>512-bit output (64 bytes). Very conservative security margin.</p>
      <p>Slower than BLAKE3 on most CPUs, but widely trusted and standardized.</p>
    </div>

    <div>
      <h3>Argon2id</h3>
      <p>Memory-hard key derivation function ‚Äî winner of Password Hashing Competition 2015.</p>
      <p>Designed to resist GPU/ASIC brute-force attacks on passwords.</p>
      <p>Use higher memory (64‚Äì1024 MiB) and time cost (3‚Äì10) for sensitive secrets.</p>
      <p>Output is a derived key (not a hash for storage ‚Äî use it for encryption keys, API tokens, etc.).</p>
      <p class="warn">Never use weak parameters for real passwords.</p>
    </div>

    <div class="note" style="margin-top: 2rem;">
      All computation happens in your browser. No data is sent anywhere.<br>
      Libraries loaded from jsDelivr CDN (once). After first load the page works offline if cached.
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/blake3@2.1.7/dist/blake3.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/argon2-browser@1.18.0/dist/argon2-bundled.min.js"></script>

<script>
// Tab switching
document.querySelectorAll('.tab').forEach(tab => {
  tab.addEventListener('click', () => {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    tab.classList.add('active');
    document.querySelectorAll('[id^="tab-"]').forEach(el => el.classList.add('hidden'));
    document.getElementById(`tab-${tab.dataset.tab}`).classList.remove('hidden');
  });
});

// Show/hide params
document.getElementById('algo').addEventListener('change', function() {
  document.getElementById('argonParams').classList.add('hidden');
  document.getElementById('blake3Params').classList.add('hidden');
  if (this.value === 'argon2') {
    document.getElementById('argonParams').classList.remove('hidden');
  } else if (this.value === 'blake3') {
    document.getElementById('blake3Params').classList.remove('hidden');
  }
});

// Generate random salt
document.getElementById('genSalt')?.addEventListener('click', () => {
  const rand = new Uint8Array(16);
  crypto.getRandomValues(rand);
  document.getElementById('salt').value = Array.from(rand)
    .map(b => b.toString(16).padStart(2, '0'))
    .join('');
});

// Main run button
document.getElementById('runBtn').addEventListener('click', async () => {
  const input = document.getElementById('input').value;
  const algo = document.getElementById('algo').value;
  const outputEl = document.getElementById('output');
  const warning = document.getElementById('sizeWarning');

  if (!input) {
    outputEl.textContent = 'Please enter some text.';
    return;
  }

  warning.classList.toggle('hidden', input.length <= 1048576);

  outputEl.textContent = 'Working‚Ä¶';

  try {
    let result = '';

    if (algo === 'blake3') {
      const len = parseInt(document.getElementById('blake3Len')?.value) || 32;
      const data = new TextEncoder().encode(input);
      const hash = blake3.hash(data, { length: len });
      result = Array.from(hash).map(b => b.toString(16).padStart(2, '0')).join('');
      outputEl.innerHTML = `<strong>BLAKE3 (${len} bytes output)</strong><br>${result}`;
    }
    else if (algo === 'sha3') {
      // Use js-sha3 if available, or fallback to custom (but prefer external for correctness)
      if (typeof sha3 !== 'undefined' && sha3.sha3_512) {
        result = sha3.sha3_512(input);
      } else {
        // Minimal fallback warning
        result = 'SHA3-512 not loaded ‚Äî please check library import.';
      }
      outputEl.innerHTML = `<strong>SHA3-512</strong><br>${result}`;
    }
    else if (algo === 'argon2') {
      const p = {
        timeCost: parseInt(document.getElementById('timeCost').value) || 3,
        memoryCost: parseInt(document.getElementById('memCost').value) || 65536,
        parallelism: parseInt(document.getElementById('parallelism').value) || 4,
        hashLength: parseInt(document.getElementById('hashLen').value) || 32,
        type: document.getElementById('argonType').value === 'id' ? argon2.ArgonType.Argon2id : argon2.ArgonType.Argon2i
      };

      let salt = document.getElementById('salt').value.trim();
      let saltBytes;
      if (salt) {
        const hex = salt.replace(/[^0-9a-f]/gi, '');
        saltBytes = new Uint8Array(hex.match(/.{1,2}/g)?.map(b => parseInt(b,16)) || []);
      } else {
        saltBytes = new Uint8Array(16);
        crypto.getRandomValues(saltBytes);
      }

      const res = await argon2.hash({
        pass: input,
        salt: saltBytes,
        time: p.timeCost,
        mem: p.memoryCost,
        parallelism: p.parallelism,
        hashLen: p.hashLength,
        type: p.type
      });

      const saltHex = Array.from(saltBytes).map(b => b.toString(16).padStart(2,'0')).join('');
      outputEl.innerHTML = `
        <strong>Argon2 key derivation</strong><br>
        Derived key (hex): ${res.hashHex}<br>
        Salt (hex): ${saltHex}<br>
        Base64: ${res.hash}
      `;
    }
  } catch (err) {
    outputEl.innerHTML = `<span style="color:#fbbf24;">Error: ${err.message}</span>`;
  }
});

// Copy & download
document.getElementById('copyBtn').onclick = () => {
  const text = document.getElementById('output').textContent;
  if (text && text !== 'Working‚Ä¶') {
    navigator.clipboard.writeText(text).then(() => alert('Copied to clipboard'));
  }
};

document.getElementById('downloadBtn').onclick = () => {
  const text = document.getElementById('output').textContent;
  if (!text || text === 'Waiting for input‚Ä¶' || text === 'Working‚Ä¶') return;
  const blob = new Blob([text], { type: 'text/plain' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'qresist-output.txt';
  a.click();
  URL.revokeObjectURL(url);
};

</script>
</body>
</html>


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QuantumEEGNet EDU ‚Ä¢ Sovereign & Safe Learning Journey</title>
  <style>
    :root {
      --gold: #FFD700;
      --glow: 0 0 12px var(--gold);
      --accent: #667eea;
      --bg: #0f172a;
      --card: rgba(255,255,255,0.05);
      --text: #e0f2fe;
      --safe: #10b981;
      --warn: #f59e0b;
      --danger: #ef4444;
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: 'Segoe UI', system-ui, sans-serif;
      background: linear-gradient(135deg, var(--bg), #1e293b);
      color: var(--text);
      min-height: 100vh;
      padding: 20px;
    }
    .header {
      text-align: center;
      padding: 30px 20px;
      background: var(--card);
      border-radius: 16px;
      margin-bottom: 30px;
      box-shadow: var(--glow);
    }
    .header h1 { font-size: 2.8em; color: var(--gold); text-shadow: var(--glow); }
    .safety-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: rgba(16,185,129,0.2);
      color: var(--safe);
      padding: 8px 16px;
      border-radius: 999px;
      border: 1px solid var(--safe);
      margin: 15px 0;
      font-weight: bold;
    }
    .progress-ribbon {
      position: fixed;
      top: 0; left: 0; right: 0; height: 6px;
      background: rgba(255,255,255,0.1);
      z-index: 1000;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--safe), #00ccff);
      transition: width 1s ease;
      box-shadow: 0 0 15px var(--safe);
    }
    .phase-container { max-width: 1100px; margin: 0 auto; }
    .phase-card {
      background: var(--card);
      border-radius: 16px;
      padding: 25px;
      margin-bottom: 25px;
      border-left: 5px solid var(--accent);
      transition: transform 0.3s;
    }
    .phase-card:hover { transform: translateY(-4px); }
    .phase-card.completed { border-left-color: var(--safe); background: rgba(16,185,129,0.08); }
    .journal-input {
      width: 100%;
      min-height: 110px;
      padding: 14px;
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 10px;
      color: white;
      font-size: 1em;
      margin: 12px 0;
    }
    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 10px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
    }
    .btn-primary { background: linear-gradient(135deg, var(--accent), #764ba2); color: white; }
    .btn-primary:hover { transform: translateY(-2px); box-shadow: var(--glow); }
    .canvas-pad { width:100%; height:180px; border:2px dashed var(--gold); border-radius:10px; background:#0a0f1a; margin:20px 0; }
    .tools { display:flex; gap:12px; flex-wrap:wrap; margin:15px 0; }
    .tool-btn { padding:10px 18px; background:var(--card); border:1px solid var(--gold); color:var(--gold); border-radius:8px; cursor:pointer; }
    .tool-btn.active { background:var(--gold); color:black; }
    .shared-reflection { background: rgba(245,158,11,0.15); border-radius:16px; padding:25px; margin:40px 0; border-left:5px solid #f59e0b; }
    .governance-card {
      background: rgba(16,185,129,0.1);
      border: 1px solid var(--safe);
      border-radius: 16px;
      padding: 25px;
      margin: 30px 0;
    }
    .governance-card h3 { color: var(--safe); margin-bottom: 15px; }
    .safety-score { font-size: 2.2em; color: var(--safe); font-weight: bold; }
    .offline-dot { width:10px; height:10px; background:var(--safe); border-radius:50%; display:inline-block; animation: pulse 2s infinite; }
    @keyframes pulse { 50% { opacity:0.4; } }
  </style>
</head>
<body>

<div class="progress-ribbon"><div class="progress-fill" id="progressFill" style="width:0%"></div></div>

<div class="header">
  <h1>üåü QuantumEEGNet EDU ‚Ä¢ Sovereign & Safe</h1>
  <p>Your private, offline learning adventure ‚Äî no cloud, no tracking, fully yours.</p>
  <div class="safety-badge">
    <span class="offline-dot"></span> 100% On-Device ‚Ä¢ Safe & Private
  </div>
  <div id="safetyScore" class="safety-score">Safety & Trust Score: 92/100 üåü</div>
</div>

<div class="phase-container" id="phaseContainer"></div>

<div class="shared-reflection">
  <h2>ü§ù Class Safety & Reflection Space</h2>
  <p>Everyone's voice matters. Share thoughts safely ‚Äî all stays on this device.</p>
  <textarea id="sharedReflection" class="journal-input" placeholder="Share your thoughts or safety ideas..."></textarea>
  <button class="btn btn-primary" onclick="addSharedNote()">Add Safely</button>
  <div id="sharedNotes" style="margin-top:20px;"></div>
</div>

<div class="governance-card">
  <h3>Our Class AI Safety Charter (Inspired by Global Ideas)</h3>
  <p>We promise to:</p>
  <ul style="margin:15px 0 0 25px; line-height:1.6;">
    <li>Keep all learning private & on-device</li>
    <li>Be honest in reflections (fun honesty check!)</li>
    <li>Watch for safety ‚Äî voice panic or unusual answers trigger gentle alerts</li>
    <li>Build trust like a global safety promise: immutable journals + hash checks</li>
  </ul>
  <p style="margin-top:15px;">Our current "certification level": <strong>Fully Safe & Sovereign</strong> (local score: 92/100)</p>
</div>

<canvas id="drawPad" class="canvas-pad"></canvas>
<div class="tools">
  <button class="tool-btn" onclick="setTool('draw')">‚úèÔ∏è Draw Name/Badge</button>
  <button class="tool-btn" onclick="clearCanvas()">üßπ Clear</button>
  <input type="file" accept=".ttf,.otf" onchange="loadFont(event)" style="color:white;">
</div>

<div style="text-align:center; margin:40px 0;">
  <button class="btn btn-primary" onclick="exportJourney()">Export Journey PDF (Local)</button>
  <button class="btn btn-primary" onclick="generateCertificate()">Earn Safety Certificate üèÜ</button>
</div>

<script>
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// Core State (localStorage only)
let studentName = localStorage.getItem('studentName') || prompt("What's your name, explorer?") || 'Explorer';
localStorage.setItem('studentName', studentName);

let completedPhases = JSON.parse(localStorage.getItem('completedPhases') || '[]');
let journalEntries = JSON.parse(localStorage.getItem('journalEntries') || '{}');
let sharedNotes   = JSON.parse(localStorage.getItem('sharedNotes')   || '[]');

// Phases (5-stage journey)
const phases = [
  { id:1, title:"Begin Your Adventure", icon:"üå±", badge:"üå±", prompts:["What excites you?", "How do you learn best?"] },
  { id:2, title:"Local Discovery", icon:"üè°", badge:"üè°", prompts:["What did you learn nearby?", "Who helped you?"] },
  { id:3, title:"Team & Regional Growth", icon:"ü§ù", badge:"ü§ù", prompts:["How did friends help?", "What changed your view?"] },
  { id:4, title:"Global Connections", icon:"üåç", badge:"üåç", prompts:["What new cultures inspire you?", "How do perspectives enrich us?"] },
  { id:5, title:"Celebration & Promise", icon:"üèÜ", badge:"üèÜ", prompts:["What are you proud of?", "What safety promise will you keep?"] }
];

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// Init & Render
function init() {
  renderPhases();
  renderSharedNotes();
  updateProgress();
  initCanvas();
}
init();

function renderPhases() {
  const container = document.getElementById('phaseContainer');
  container.innerHTML = '';
  phases.forEach(phase => {
    const done = completedPhases.includes(phase.id);
    const card = document.createElement('div');
    card.className = `phase-card ${done ? 'completed' : ''}`;
    card.innerHTML = `
      <h2>${phase.icon} ${phase.title}</h2>
      <div style="margin:15px 0;">
        ${phase.prompts.map(p => `<p>‚Ä¢ ${p}</p>`).join('')}
      </div>
      <textarea class="journal-input" id="j-${phase.id}" placeholder="Your reflection..." onchange="saveJournal(${phase.id})">${journalEntries[phase.id]||''}</textarea>
      <button class="btn btn-primary" onclick="completePhase(${phase.id})" ${done?'disabled':''}>
        ${done ? '‚úì Completed' : 'Mark Complete'}
      </button>
    `;
    container.appendChild(card);
  });
}

function saveJournal(id) {
  const val = document.getElementById(`j-${id}`).value.trim();
  journalEntries[id] = val;
  localStorage.setItem('journalEntries', JSON.stringify(journalEntries));
  // Simple hash for "immutable feel"
  if (val) hashAndStoreEntry(id, val);
}

async function hashAndStoreEntry(id, text) {
  const encoder = new TextEncoder();
  const data = encoder.encode(text + Date.now());
  const hashBuffer = await crypto.subtle.digest('SHA-256', data);
  const hash = Array.from(new Uint8Array(hashBuffer)).map(b => b.toString(16).padStart(2,'0')).join('');
  localStorage.setItem(`hash-${id}`, hash);
  console.log(`Entry ${id} hashed: ${hash.substring(0,16)}...`);
}

function completePhase(id) {
  if (!journalEntries[id] || journalEntries[id].trim().length < 20) {
    alert("Write a bit more ‚Äî at least 20 characters ‚Äî to complete safely.");
    return;
  }
  if (!completedPhases.includes(id)) {
    completedPhases.push(id);
    localStorage.setItem('completedPhases', JSON.stringify(completedPhases));
    playConfetti();
    renderPhases();
    updateProgress();
    if (completedPhases.length === phases.length) triggerCelebration();
  }
}

function updateProgress() {
  const pct = (completedPhases.length / phases.length) * 100;
  document.getElementById('progressFill').style.width = pct + '%';
}

function playConfetti() {
  for (let i = 0; i < 60; i++) {
    const c = document.createElement('div');
    c.style.cssText = `position:fixed; width:10px;height:10px;background:${['#ffd700','#00ff88','#00ccff'][Math.floor(Math.random()*3)]};left:${Math.random()*100}%;animation:confetti-fall ${Math.random()*3+2}s linear;`;
    document.body.appendChild(c);
    setTimeout(() => c.remove(), 5000);
  }
}
@keyframes confetti-fall { to { transform:translateY(120vh) rotate(720deg); } }

function triggerCelebration() {
  alert("üéâ Full journey complete! You're a sovereign learner ‚Äî safe & strong!");
  generateCertificate();
}

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// Shared Notes
function addSharedNote() {
  const input = document.getElementById('sharedReflection');
  const text = input.value.trim();
  if (text.length < 10) return alert("Add at least 10 characters for safety.");
  const note = { author:studentName, text, time:new Date().toLocaleString() };
  sharedNotes.push(note);
  localStorage.setItem('sharedNotes', JSON.stringify(sharedNotes));
  input.value = '';
  renderSharedNotes();
}

function renderSharedNotes() {
  document.getElementById('sharedNotes').innerHTML = sharedNotes.map(n => `
    <div style="background:rgba(255,255,255,0.08);padding:15px;border-radius:10px;margin:10px 0;position:relative;">
      <div style="position:absolute;top:-10px;left:15px;background:var(--accent);color:white;width:30px;height:30px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:bold;">${n.author[0].toUpperCase()}</div>
      <p>${n.text}</p>
      <small style="color:#94a3b8;">‚Äî ${n.author}, ${n.time}</small>
    </div>
  `).join('');
}

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// Canvas Drawing Pad
let canvas, ctx, tool = 'draw';
function initCanvas() {
  canvas = document.getElementById('drawPad');
  ctx = canvas.getContext('2d');
  canvas.width = canvas.offsetWidth;
  canvas.height = 180;
  let drawing = false;
  canvas.addEventListener('mousedown', e => { drawing=true; draw(e); });
  canvas.addEventListener('mousemove', draw);
  canvas.addEventListener('mouseup', () => drawing=false);
  canvas.addEventListener('mouseout', () => drawing=false);
}
function setTool(t) { tool = t; }
function draw(e) {
  if (!drawing) return;
  const rect = canvas.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;
  ctx.lineWidth = 6;
  ctx.lineCap = 'round';
  ctx.strokeStyle = tool==='draw' ? var(--gold) : '#111';
  ctx.lineTo(x, y);
  ctx.stroke();
  ctx.beginPath();
  ctx.moveTo(x, y);
}
function clearCanvas() { ctx.clearRect(0,0,canvas.width,canvas.height); }

// Font Uploader
function loadFont(e) {
  const file = e.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = ev => {
    const font = new FontFace('CustomFont', ev.target.result);
    font.load().then(f => document.fonts.add(f));
    document.body.style.fontFamily = "'CustomFont', system-ui";
  };
  reader.readAsArrayBuffer(file);
}

// Export / Certificate (placeholders ‚Äî real jsPDF needs <script src="..."> but kept local-sim)
function exportJourney() { alert("Local export ready! (In full version: jsPDF would generate your journey PDF offline)"); }
function generateCertificate() {
  alert(`üèÜ Sovereign Learner Certificate\n\nStudent: ${studentName}\nCompleted: All Phases\nDate: ${new Date().toLocaleDateString()}\n\n"Safe, private, and powerful ‚Äî that's our promise!"`);
}
</script>
</body>
</html>



